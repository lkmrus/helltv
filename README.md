# Payment Service MVP

MVP –ø–ª–∞—Ç–µ–∂–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ –Ω–∞ NestJS —Å SQLite, —Ä–µ–∞–ª–∏–∑—É—é—â–∏–π –¥–≤—É—Ö—ç—Ç–∞–ø–Ω—É—é –æ–ø–ª–∞—Ç—É –∏ –∞—Ç–æ–º–∞—Ä–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏.

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
npm install

# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —É–∂–µ —Å–æ–∑–¥–∞–Ω–∞, –Ω–æ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –º–æ–∂–Ω–æ –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å:
npx prisma migrate reset  # –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Å—Ç –ë–î –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç seed

# –ó–∞–ø—É—Å–∫ –≤ dev —Ä–µ–∂–∏–º–µ
npm run start:dev
```

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –Ω–∞ `http://localhost:3050`

## Docker

### –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫

```bash
# –°–æ–±—Ä–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker-compose up --build

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ
docker-compose up -d

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker-compose logs -f app

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker-compose down
```

### –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

Docker –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —É–º–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏:
- ‚úÖ **–ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫**: –°–æ–∑–¥–∞–µ—Ç –ë–î, –ø—Ä–∏–º–µ–Ω—è–µ—Ç –º–∏–≥—Ä–∞—Ü–∏–∏, –∑–∞–≥—Ä—É–∂–∞–µ—Ç seed –¥–∞–Ω–Ω—ã–µ
- ‚úÖ **–ü–æ—Å–ª–µ–¥—É—é—â–∏–µ –∑–∞–ø—É—Å–∫–∏**: –¢–æ–ª—å–∫–æ –ø—Ä–∏–º–µ–Ω—è–µ—Ç –Ω–æ–≤—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏, —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ
- ‚úÖ **Seed –¥–∞–Ω–Ω—ã–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑** (–æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ —Ñ–∞–π–ª-–º–∞—Ä–∫–µ—Ä `.initialized`)

### –ü–æ–ª–Ω—ã–π —Å–±—Ä–æ—Å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–î–ª—è –ø–æ–ª–Ω–æ–≥–æ —Å–±—Ä–æ—Å–∞ –ë–î –∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è seed:

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ —É–¥–∞–ª–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker-compose down

# –£–¥–∞–ª–∏—Ç—å –ë–î –∏ –º–∞—Ä–∫–µ—Ä –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
rm -f prisma/dev.db prisma/.initialized

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å (–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å –Ω—É–ª—è)
docker-compose up --build
```

–ò–ª–∏ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π:
```bash
# –û—á–∏—Å—Ç–∏—Ç—å –≤—Å—ë –∏ –ø–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å
docker-compose down && rm -f prisma/dev.db prisma/.initialized && docker-compose up --build
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Docker

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å
docker-compose up -d

# –ü–æ–¥–æ–∂–¥–∞—Ç—å –∑–∞–ø—É—Å–∫–∞
sleep 3

# –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å API
curl http://localhost:3050/products

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
docker-compose logs -f app
```

### T–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. –û—Ç–∫—Ä–æ–π—Ç–µ `api-test.http` –≤ VS Code (—Å REST Client extension)
2. –í—ã–ø–æ–ª–Ω–∏—Ç–µ POST –∑–∞–ø—Ä–æ—Å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–ª–∞—Ç–µ–∂–Ω–æ–π —Å—Å—ã–ª–∫–∏ (—Å–µ–∫—Ü–∏—è PAYMENTS)
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ `transactionId` –∏ `paymentIntentId` –∏–∑ –æ—Ç–≤–µ—Ç–∞
4. –í—Å—Ç–∞–≤—å—Ç–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ —Å–µ–∫—Ü–∏—é WEBHOOKS
5. –í—ã–ø–æ–ª–Ω–∏—Ç–µ POST –∑–∞–ø—Ä–æ—Å –¥–ª—è —ç–º—É–ª—è—Ü–∏–∏ —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç—ã
6. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —á–µ—Ä–µ–∑ GET –∑–∞–ø—Ä–æ—Å—ã (—Å–µ–∫—Ü–∏–∏ ACCOUNTS, TRANSACTIONS, ORDERS)

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ API

#### –ü–ª–∞—Ç–µ–∂–∏
- `POST /payments/url` - —Å–æ–∑–¥–∞—Ç—å –ø–ª–∞—Ç–µ–∂–Ω—É—é —Å—Å—ã–ª–∫—É (refill –∏–ª–∏ purchase, —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —á–∞—Å—Ç–∏—á–Ω–æ–π –æ–ø–ª–∞—Ç—ã)
- `POST /payments/provider/webhook` - webhook –æ—Ç –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞

#### –ó–∞–∫–∞–∑—ã
- `POST /orders/create` - —Å–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑ –Ω–∞–ø—Ä—è–º—É—é —Å –±–∞–ª–∞–Ω—Å–∞ (–µ—Å–ª–∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤)

#### –ß—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- `GET /products` - —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–¥—É–∫—Ç–æ–≤
- `GET /accounts/user/:userId` - –±–∞–ª–∞–Ω—Å —Å—á–µ—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `GET /transactions/:id` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- `GET /orders/:id` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–∫–∞–∑–µ

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –°—Ü–µ–Ω–∞—Ä–∏–∏ –æ–ø–ª–∞—Ç—ã

#### 1. –ü—Ä—è–º–∞—è –ø–æ–∫—É–ø–∫–∞ —Å –±–∞–ª–∞–Ω—Å–∞
**–£—Å–ª–æ–≤–∏–µ:** –ë–∞–ª–∞–Ω—Å >= –¶–µ–Ω–∞ —Ç–æ–≤–∞—Ä–∞

```bash
POST /orders/create { userId, productId }
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
- ‚úÖ –°–æ–∑–¥–∞–µ—Ç—Å—è PRODUCT_PURCHASE —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è (User ‚Üí Service)
- ‚úÖ –ë–∞–ª–∞–Ω—Å —Å–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ
- ‚úÖ –ó–∞–∫–∞–∑ —Å–æ–∑–¥–∞–µ—Ç—Å—è —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º PAID
- ‚ö° –í—Å–µ –∞—Ç–æ–º–∞—Ä–Ω–æ –≤ –æ–¥–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ë–î

#### 2. –ß–∞—Å—Ç–∏—á–Ω–∞—è –æ–ø–ª–∞—Ç–∞ (–ë–∞–ª–∞–Ω—Å + –ö–∞—Ä—Ç–∞)
**–£—Å–ª–æ–≤–∏–µ:** 0 < –ë–∞–ª–∞–Ω—Å < –¶–µ–Ω–∞ —Ç–æ–≤–∞—Ä–∞

```bash
POST /payments/url { userId, productId }
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
- ‚úÖ –°–æ–∑–¥–∞–µ—Ç—Å—è –ø–µ—Ä–≤–∞—è PRODUCT_PURCHASE (—Å–ø–∏—Å–∞–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞)
- ‚úÖ –ë–∞–ª–∞–Ω—Å —Å–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ
- ‚è≥ –°–æ–∑–¥–∞–µ—Ç—Å—è ACCOUNT_REFILL (–¥–ª—è –æ—Å—Ç–∞—Ç–∫–∞ —á–µ—Ä–µ–∑ –∫–∞—Ä—Ç—É)
- üìß –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è payment URL –¥–ª—è –æ–ø–ª–∞—Ç—ã –æ—Å—Ç–∞—Ç–∫–∞
- ‚è≥ –ü–æ—Å–ª–µ webhook —Å–æ–∑–¥–∞–µ—Ç—Å—è –≤—Ç–æ—Ä–∞—è PRODUCT_PURCHASE (–æ—Å—Ç–∞—Ç–æ–∫)
- ‚úÖ –ó–∞–∫–∞–∑ —Å–æ–∑–¥–∞–µ—Ç—Å—è —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º PAID
- ‚ö° Webhook –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∞—Ç–æ–º–∞—Ä–Ω–∞

**–ü—Ä–∏–º–µ—Ä:** –ë–∞–ª–∞–Ω—Å $30, —Ç–æ–≤–∞—Ä $100
- –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ: -$30 —Å –±–∞–ª–∞–Ω—Å–∞ (PRODUCT_PURCHASE #1)
- –ö–∞—Ä—Ç–∞: +$70 –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ ‚Üí -$70 —Å–ø–∏—Å–∞–Ω–∏–µ (ACCOUNT_REFILL + PRODUCT_PURCHASE #2)
- –ò—Ç–æ–≥–æ: –±–∞–ª–∞–Ω—Å –Ω–µ –∏–∑–º–µ–Ω–∏–ª—Å—è, –∑–∞–∫–∞–∑ –Ω–∞ $100 –æ–ø–ª–∞—á–µ–Ω

#### 3. –ü–æ–ª–Ω–∞—è –æ–ø–ª–∞—Ç–∞ –∫–∞—Ä—Ç–æ–π
**–£—Å–ª–æ–≤–∏–µ:** –ë–∞–ª–∞–Ω—Å = 0

```bash
POST /payments/url { userId, productId }
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç (–∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π flow):**
- ‚è≥ –°–æ–∑–¥–∞–µ—Ç—Å—è ACCOUNT_REFILL (–ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ)
- üìß –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è payment URL
- ‚è≥ –ü–æ—Å–ª–µ webhook —Å–æ–∑–¥–∞–µ—Ç—Å—è PRODUCT_PURCHASE
- ‚úÖ –ó–∞–∫–∞–∑ —Å–æ–∑–¥–∞–µ—Ç—Å—è —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º PAID
- ‚ö° –í—Å–µ –∞—Ç–æ–º–∞—Ä–Ω–æ –≤ webhook –æ–±—Ä–∞–±–æ—Ç–∫–µ

### –î–≤—É—Ö—ç—Ç–∞–ø–Ω–∞—è –æ–ø–ª–∞—Ç–∞ (legacy)
1. **ACCOUNT_REFILL** - –≤–Ω–µ—à–Ω–µ–µ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ (service ‚Üí user)
2. **PRODUCT_PURCHASE** - —Å–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ –∑–∞–∫–∞–∑ (user ‚Üí service)

–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –∞—Ç–æ–º–∞—Ä–Ω–æ –≤ –æ–¥–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ë–î.

### –ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- **TransactionsService** - —è–¥—Ä–æ —Å–∏—Å—Ç–µ–º—ã, –∞—Ç–æ–º–∞—Ä–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- **PaymentsService** - –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è –ø–ª–∞—Ç–µ–∂–µ–π
- **StubProviderService** - –∑–∞–≥–ª—É—à–∫–∞ –ø–ª–∞—Ç–µ–∂–Ω–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
- **AccountsService** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞–º–∏
- **EventEmitter2** - —Å–∏—Å—Ç–µ–º–∞ —Å–æ–±—ã—Ç–∏–π

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (SQLite)
- **User** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (id=1 SERVICE, id=2 USER)
- **Account** - —Å—á–µ—Ç–∞ (balance, incoming, outgoing)
- **Product** - –ø—Ä–æ–¥—É–∫—Ç—ã (id=1, price=$100)
- **Transaction** - —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- **Order** - –∑–∞–∫–∞–∑—ã

Seed –¥–∞–Ω–Ω—ã–µ: 2 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –±–∞–ª–∞–Ω—Å–æ–º $10,000, 1 –ø—Ä–æ–¥—É–∫—Ç –∑–∞ $100.

## –ò–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã

‚úÖ –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–æ–≤ –≤ –æ–¥–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ë–î
‚úÖ –°–æ–±—ã—Ç–∏—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ commit
‚úÖ –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å webhook (UNIQUE –∏–Ω–¥–µ–∫—Å—ã)
‚úÖ –í–∞–ª—é—Ç–∞ USD (—Ö–∞—Ä–¥–∫–æ–¥)
‚úÖ –î–≤—É—Ö—ç—Ç–∞–ø–Ω–∞—è –æ–ø–ª–∞—Ç–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞

## Memory Bank

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ `/memory-bank/`:
- `projectbrief.md` - —Ü–µ–ª–∏ –∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- `productContext.md` - –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
- `systemPatterns.md` - –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –ø–∞—Ç—Ç–µ—Ä–Ω—ã
- `techContext.md` - —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- `activeContext.md` - —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å
- `progress.md` - –ø—Ä–æ–≥—Ä–µ—Å—Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

–°–º. —Ç–∞–∫–∂–µ `TODO.md` –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –ø–ª–∞–Ω–∞.

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –°–±–æ—Ä–∫–∞
```bash
npm run build
```

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
```bash
# –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é
npx prisma migrate dev --name <name>

# –ü—Ä–∏–º–µ–Ω–∏—Ç—å seed
npm run db:seed

# Prisma Studio (GUI)
npx prisma studio
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç–∏

–ü—Ä–æ–µ–∫—Ç –≤–∫–ª—é—á–∞–µ—Ç —Ç–µ—Å—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç–∏ –æ–ø–µ—Ä–∞—Ü–∏–π –∏ –∑–∞—â–∏—Ç—ã –æ—Ç race conditions:

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä
npm run start:dev

# –í –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç
npm run test:concurrency
```

**–¢–µ—Å—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:**
- ‚úÖ –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å webhook (10 –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤)
- ‚úÖ –ê—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–æ–≤
- ‚úÖ –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ race conditions
- ‚úÖ –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö

–°–º. `ATOMICITY_TEST_RESULTS.md` –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü—Ä–µ—Ñ–∏–∫—Å—ã –≤ –ª–æ–≥–∞—Ö:
- `[PAYMENT]` - —Å–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–µ–π
- `[WEBHOOK]` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ webhook
- `[TRANSACTION]` - –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- `[ORDER]` - —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤
- `[EVENT]` - –ø—É–±–ª–∏–∫–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π
- `[ACCOUNT]` - –∏–∑–º–µ–Ω–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–æ–≤
